sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast"],function(e,t,a){"use strict";return e.extend("wf.weather.controller.weatherf",{onInit:function(){this._loadCityWeather("Raigarh")},onGetWeather:function(){var e=this.byId("cityInput").getValue();if(e){this._loadCityWeather(e)}else{a.show("Please enter a city name")}},_loadCityWeather:function(e){var i=this;var r="a187a56de525ef3655614182134f92d5";var n="https://api.openweathermap.org/data/2.5/weather?q="+e+"&units=metric&appid="+r;var o="https://api.openweathermap.org/data/2.5/forecast?q="+e+"&units=metric&appid="+r;sap.ui.core.BusyIndicator.show(0);Promise.all([fetch(n),fetch(o)]).then(function(e){return Promise.all(e.map(e=>e.json()))}).then(function(e){sap.ui.core.BusyIndicator.hide();var r=e[0];var n=e[1];if(r.cod!==200){a.show("Error: "+r.message);return}var o=n.list.filter(function(e){return e.dt_txt.includes("12:00:00")}).map(function(e){var t=new Date(e.dt*1e3);return{day:t.toLocaleDateString("en-US",{weekday:"short"}),emoji:i._getWeatherEmoji(e.weather[0].main),high:Math.round(e.main.temp)}});var s={current:{city:r.name,temp:Math.round(r.main.temp),condition:r.weather[0].main,emoji:i._getWeatherEmoji(r.weather[0].main),visibility:(r.visibility/1e3).toFixed(0),humidity:r.main.humidity,uvIndex:"N/A"},forecast:o};var h=i.getView().getModel("weatherModel");if(!h){i.getView().setModel(new t(s),"weatherModel")}else{h.setData(s)}}).catch(function(e){sap.ui.core.BusyIndicator.hide();a.show("Error fetching exact weather data")})},_getWeatherEmoji:function(e){var t={Clear:"â˜€ï¸",Clouds:"â˜ï¸",Rain:"ğŸŒ§ï¸",Drizzle:"ğŸŒ¦ï¸",Thunderstorm:"â›ˆï¸",Snow:"â„ï¸",Mist:"ğŸŒ«ï¸",Smoke:"ğŸŒ«ï¸",Haze:"ğŸŒ«ï¸"};return t[e]||"â˜€ï¸"}})});
//# sourceMappingURL=weatherf.controller.js.map